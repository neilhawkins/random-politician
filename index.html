<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>TheyWorkForYou.com API JavaScript interface Test Page</title>
<!-- <script src="twfyapi.js"></script>-->

</head>
<body>
<div id="chosen_one"><h1></h1></div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> 
<script>
	
	var app = {

			url: "http://www.theyworkforyou.com/api/getMPs?key=GEGMS7CVRzUFFvoPV2DbcscS&output=js&callback=?",

			init: function() {
				this.make_request();
			},

			make_request: function() {
				// Reference to app object for use within nester function
				var self = this;
				var response_data;

				response_data = JSON.parse(localStorage.getItem('getMPs'));

				if (!response_data) $.getJSON(this.url, function (data) {
				    response_data = localStorage.setItem('getMPs', JSON.stringify(data));
		   			self.response_data = result;
				});			
	  	},

	  	pick_one: function(item)	{
				var random_id = Math.floor(Math.random() * 648);
				console.log(random_id);

				
				this.chosen_one = members[random_id];

				console.log(this.chosen_one);

				$('#chosen_one h1').text(chosen_one.name + " MP");
				$('#chosen_one .last_words').text(app.response_data.rows[0].body)
				console.log(chosen_one.name);
			}
	}
	
	app.init();
	
</script>
</body>
</html>